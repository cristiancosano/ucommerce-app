{"version":3,"sources":["./src/app/pages/account/shopping-history/order-history/order-history-routing.module.ts","./src/app/pages/account/shopping-history/order-history/order-history.module.ts","./src/app/pages/account/shopping-history/order-history/order-history.page.ts","./src/app/pages/account/shopping-history/order-history/order-history.page.scss","./src/app/pages/account/shopping-history/order-history/order-history.page.html"],"names":[],"mappings":"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","file":"src_app_pages_account_shopping-history_order-history_order-history_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrderHistoryPage } from './order-history.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrderHistoryPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrderHistoryPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OrderHistoryPageRoutingModule } from './order-history-routing.module';\r\n\r\nimport { OrderHistoryPage } from './order-history.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OrderHistoryPageRoutingModule\r\n  ],\r\n  declarations: [OrderHistoryPage]\r\n})\r\nexport class OrderHistoryPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { DetailedOrder } from 'src/app/interfaces/DetailedOrder';\r\nimport { OrderService } from 'src/app/services/order/order.service';\r\n\r\n@Component({\r\n  selector: 'app-order-history',\r\n  templateUrl: './order-history.page.html',\r\n  styleUrls: ['./order-history.page.scss'],\r\n})\r\nexport class OrderHistoryPage implements OnInit {\r\n\r\n  id: number;\r\n  order: DetailedOrder;\r\n  loading: Promise<HTMLIonLoadingElement>;\r\n  loadError: Boolean\r\n\r\n  constructor(private route: ActivatedRoute, private orderService: OrderService, private loadingController: LoadingController) { \r\n    this.order = {orderId: 0, total: '0', createdAt:'', updatedAt: '', items: JSON}\r\n    this.loadError = false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.id = Number(this.route.snapshot.paramMap.get('id'))\r\n    this.presentLoading()\r\n    this.getOrderHistory()\r\n  }\r\n\r\n  \r\n  getOrderHistory(){\r\n    this.orderService.getOrderById(this.id).then(async (order: DetailedOrder) => {\r\n      this.order = order[0]\r\n      console.log(order)\r\n      this.loading.then(message => message.dismiss('loaded', 'ok'))\r\n    }).catch(async() => this.loading.then(message => message.dismiss('not loaded', 'api timeout')));\r\n  }\r\n\r\n\r\n  async presentLoading() {\r\n    this.loading = this.loadingController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Please wait...',\r\n      backdropDismiss:  false\r\n    });\r\n    this.loading.then(async (message) => {\r\n      message.present()\r\n      const { data, role } = await message.onDidDismiss();\r\n      if(role == undefined || role == 'api timeout'){\r\n        this.loadError = true\r\n      }\r\n    })\r\n  }\r\n\r\n}\r\n","export default \"h1 {\\n  border-top: solid 3px #010;\\n  border-bottom: 3px solid #010;\\n  margin: 5px;\\n}\\n\\nimg {\\n  padding: 5px;\\n  margin: 10px;\\n  float: left;\\n  width: 150px;\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n  height: 50%;\\n  border-radius: 10px;\\n  margin-top: 2.5em;\\n}\\n\\n.background {\\n  background-color: teal;\\n  color: white;\\n  direction: rtl;\\n}\\n\\n.derecha {\\n  direction: rtl;\\n}\\n\\n.small {\\n  font-size: small;\\n}\\n\\n.smaller {\\n  font-size: x-small;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLWhpc3RvcnkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksMEJBQUE7RUFDQSw2QkFBQTtFQUNBLFdBQUE7QUFDSjs7QUFFQTtFQUNBLFlBQUE7RUFBYyxZQUFBO0VBQWMsV0FBQTtFQUFhLFlBQUE7RUFDekMsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtBQUlBOztBQURBO0VBQ0ksc0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQUlKOztBQURBO0VBQ0EsY0FBQTtBQUlBOztBQURBO0VBQ0EsZ0JBQUE7QUFJQTs7QUFGQTtFQUNBLGtCQUFBO0FBS0EiLCJmaWxlIjoib3JkZXItaGlzdG9yeS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJoMSAge1xyXG4gICAgYm9yZGVyLXRvcDogc29saWQgM3B4ICMwMTA7XHJcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzAxMDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcblxyXG5pbWcgeyAgIFxyXG5wYWRkaW5nOiA1cHg7IG1hcmdpbjogMTBweDsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxNTBweDtcclxuZGlzcGxheTogYmxvY2s7XHJcbm1hcmdpbi1sZWZ0OiBhdXRvO1xyXG5tYXJnaW4tcmlnaHQ6IGF1dG87XHJcbmhlaWdodDogNTAlO1xyXG5ib3JkZXItcmFkaXVzOiAxMHB4O1xyXG5tYXJnaW4tdG9wOiAyLjVlbTtcclxufVxyXG5cclxuLmJhY2tncm91bmQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdGVhbDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGRpcmVjdGlvbjogcnRsXHJcbiAgfVxyXG5cclxuLmRlcmVjaGF7XHJcbmRpcmVjdGlvbjogcnRsXHJcbn1cclxuXHJcbi5zbWFsbHtcclxuZm9udC1zaXplOiBzbWFsbFxyXG59XHJcbi5zbWFsbGVye1xyXG5mb250LXNpemU6IHgtc21hbGxcclxufSJdfQ== */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Order History with ID: {{order.orderId}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"order.orderId !== 0\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row >\\r\\n        <ion-row size-xs=\\\"12\\\" size-sm=\\\"6\\\" size-md=\\\"4\\\" size-lg=\\\"3\\\" *ngFor=\\\"let item of order.items\\\">\\r\\n          <img src=\\\"https://i.picsum.photos/id/870/200/300.jpg?hmac=JX9iOiKD1A168ozbMTARKt6OKYtgsGx9GaBC8tX7oBg\\\"/>\\r\\n          <ion-grid >\\r\\n            <ion-col>          \\r\\n                  <h3 routerLink=\\\"/products/{{item.productId}}\\\">\\r\\n                    {{item.name}}\\r\\n                  </h3>\\r\\n                    <p class=\\\"small\\\">Categoría: {{item.category.name}}</p>\\r\\n                    <p class=\\\"small\\\">Precio unitario: {{item.unitPrice}} €</p>\\r\\n                    <p class=\\\"small\\\">Precio total: item.totalPrice €</p>\\r\\n           </ion-col>\\r\\n          </ion-grid>\\r\\n        </ion-row>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n     \\r\\n  </div>\\r\\n        <ion-row>\\r\\n         <ion-col>  \\r\\n            <h1 class=\\\"background\\\">Importe total: {{order.total}}€</h1>         \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n\\r\\n    \\r\\n\\r\\n  \\r\\n      <ion-row class=\\\"derecha\\\" *ngFor=\\\"let item of order.items\\\">\\r\\n        <ion-col>\\r\\n          <p class=\\\"smaller\\\">Orden creada a fecha de: {{order.createdAt}}</p>\\r\\n          <p class=\\\"smaller\\\">Fecha de última modificación: {{order.updatedAt}}</p>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n       \\r\\n      \\r\\n    <div *ngIf=\\\"loadError\\\" class=\\\"error\\\">Error fetching data from api service. Check your internet connection or try again later.</div>\\r\\n</ion-content>\";"],"sourceRoot":"webpack:///"}