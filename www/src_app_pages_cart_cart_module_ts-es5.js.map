{"version":3,"sources":["webpack:///src/app/components/cart-show-card/cart-show-card.component.ts","webpack:///src/app/components/cart-show-card/cart-show-card.module.ts","webpack:///src/app/pages/cart/cart-routing.module.ts","webpack:///src/app/pages/cart/cart.module.ts","webpack:///src/app/pages/cart/cart.page.ts","webpack:///src/app/components/cart-show-card/cart-show-card.component.scss","webpack:///src/app/pages/cart/cart.page.scss","webpack:///src/app/components/cart-show-card/cart-show-card.component.html","webpack:///src/app/pages/cart/cart.page.html"],"names":["CartShowCardComponent","total","quantity","price","Input","Component","selector","template","CartShowCardComponentModule","NgModule","imports","CommonModule","FormsModule","IonicModule","RouterModule","declarations","exports","routes","path","component","CartPage","CartPageRoutingModule","CartPageModule","ProductPageRoutingModule","ProductCardComponentModule","route","productService","cartService","router","selectedItems","getCartUser","getCartByCustomer","then","data","cart","console","log","getCartProducts","productsCart","updateTotalPrice","x","length","unitPrice","totalBuyPrice","updateCart","productId","Number","snapshot","paramMap","get","items","selected","obj","count","Object","keys","map","key","reduce","a","b","removeProductOfCart","navigate","ActivatedRoute","ProductService","CartService","Router"],"mappings":"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","file":"src_app_pages_cart_cart_module_ts-es5.js","sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'cart-show-card',\n  templateUrl: './cart-show-card.component.html',\n  styleUrls: ['./cart-show-card.component.scss'],\n})\nexport class CartShowCardComponent implements OnInit {\n  @Input() quantity: any;\n  @Input() price: any;\n  private total: any;\n    constructor() { }\n\n  ngOnInit() {\n    this.total = this.quantity * this.price;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartShowCardComponent } from './cart-show-card.component';\nimport { RouterModule } from '@angular/router';\n\n\n@NgModule({\n  imports: [ CommonModule, FormsModule, IonicModule, RouterModule],\n  declarations: [CartShowCardComponent],\n  exports: [CartShowCardComponent]\n})\nexport class CartShowCardComponentModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CartPage } from './cart.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CartPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CartPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CartPageRoutingModule } from './cart-routing.module';\nimport { ProductPageRoutingModule } from '../products/product/product-routing.module';\nimport { ProductCardComponentModule } from 'src/app/components/product-card/product-card.module';\nimport { CartShowCardComponentModule } from 'src/app/components/cart-show-card/cart-show-card.module';\nimport { CartPage } from './cart.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CartPageRoutingModule,\n    ProductPageRoutingModule,\n    ProductCardComponentModule,\n    CartShowCardComponentModule\n  ],\n  declarations: [CartPage]\n})\nexport class CartPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Product } from 'src/app/interfaces/Product';\nimport { ActivatedRoute } from '@angular/router';\nimport { ProductExtended } from 'src/app/interfaces/ProductExtended';\nimport { ProductService } from 'src/app/services/product/product.service';\nimport { CartService } from 'src/app/services/cart/cart.service';\nimport { CartItem } from 'src/app/interfaces/CartItem';\nimport { Variable } from '@angular/compiler/src/render3/r3_ast';\nimport { observable } from 'rxjs';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.page.html',\n  styleUrls: ['./cart.page.scss'],\n})\nexport class CartPage implements OnInit {\n\n  selectedItems = [];\n  total = 0;\n  productId : number\n  private productsCart: Array<ProductExtended>;\n  private cart: Array<CartItem>;\n  private totalBuyPrice: number;\n  constructor(private route: ActivatedRoute, private productService: ProductService, private cartService: CartService, private router: Router) { }\n\n  ngOnInit() {\n    this.productId = Number(this.route.snapshot.paramMap.get('id'));\n    this.getCartUser();\n    this.getCartProducts()\n    let items = this.productsCart;\n    let selected = {};\n\n    for(let obj of items){\n      selected[obj.productId] = {...obj, count: 1};\n    }\n\n    this.selectedItems = Object.keys(selected).map(key => selected[key])\n    this.total = this.selectedItems.reduce((a, b) => a + (b.quantity * b.unitPrice), 0);\n  }\n\n  remove(){\n    this.cartService.removeProductOfCart(this.productId);//\n    this.router.navigate([\"/products\"]);\n  }\n\n  getCartUser = () => {\n    this.cartService.getCartByCustomer().then((data: Array<CartItem>) => {\n      this.cart = data\n      console.log(data)\n    })\n  }\n  getCartProducts = () => {\n    this.cartService.getCartProducts().then((data: Array<ProductExtended>) => {\n      this.productsCart = data\n      this.updateTotalPrice()\n    })\n  }\n\n  updateTotalPrice = () => {\n    \n  \n    for (let x = 0 ; x < this.productsCart.length; x++ )\n    {\n      this.total = this.total + (this.productsCart[x].quantity * this.productsCart[x].unitPrice)\n      \n    }\n    this.totalBuyPrice = this.total\n    console.log(this.total)\n }\n\n updateCart = () => \n {\n   this.total = 0;\n  this.getCartUser()\n  this.getCartProducts()\n }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjYXJ0LXNob3ctY2FyZC5jb21wb25lbnQuc2NzcyJ9 */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjYXJ0LnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-item  [routerLink]=\\\"['/cart', id]\\\">\\n  <ion-thumbnail slot=\\\"start\\\">\\n    <img src=\\\"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y\\\">\\n  </ion-thumbnail>\\n  <ion-label>\\n    <h3>Cantidad: {{quantity}}</h3>\\n    <p>Precio unitario: {{price}}</p>\\n    <p><strong>Total: </strong> EUR {{total}}</p>\\n  </ion-label>\\n</ion-item>\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Carrito</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-button expand=\\\"block\\\" (click)=\\\"updateCart()\\\">Reload</ion-button>\\n\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-item *ngFor=\\\"let item of selectedItems\\\" lines=\\\"inset\\\">\\n     {{item.quantity}} x {{item.name}} - {{item.unitPrice}} €\\n     <span slot=\\\"end\\\"t> {{item.unitPrice * item.quantity}} € </span>\\n    </ion-item>\\n    <ion-item class=\\\"bold\\\">\\n      Total: <span slot=\\\"end\\\"> {{total}} € </span>\\n    </ion-item>\\n  </ion-list>\\n\\n  <div class=\\\"center\\\">\\n    <button ion-button class=\\\"button1\\\" full round (click)=\\\"presentModal()\\\" >Realizar Pedido</button>\\n    <!-- Falta hacer la funcion de realizar pedido. -->\\n    <button ion-button class=\\\"button2\\\" full round (click)=\\\"remove()\\\" >Borrar carrito</button>\\n  </div>\\n\\n</ion-content>\";"]}