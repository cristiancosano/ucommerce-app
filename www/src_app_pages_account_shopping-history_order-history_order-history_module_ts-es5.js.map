{"version":3,"sources":["webpack:///src/app/pages/account/shopping-history/order-history/order-history-routing.module.ts","webpack:///src/app/pages/account/shopping-history/order-history/order-history.module.ts","webpack:///src/app/pages/account/shopping-history/order-history/order-history.page.ts","webpack:///src/app/pages/account/shopping-history/order-history/order-history.page.scss","webpack:///src/app/pages/account/shopping-history/order-history/order-history.page.html"],"names":["routes","path","component","OrderHistoryPage","OrderHistoryPageRoutingModule","NgModule","imports","RouterModule","exports","OrderHistoryPageModule","CommonModule","FormsModule","IonicModule","declarations","route","orderService","loadingController","order","orderId","total","createdAt","updatedAt","items","JSON","loadError","id","Number","snapshot","paramMap","get","presentLoading","getOrderHistory","getOrderById","then","console","log","loading","message","dismiss","create","cssClass","backdropDismiss","present","onDidDismiss","data","role","undefined","ActivatedRoute","OrderService","LoadingController","Component","selector","template"],"mappings":"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","file":"src_app_pages_account_shopping-history_order-history_order-history_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrderHistoryPage } from './order-history.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrderHistoryPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrderHistoryPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OrderHistoryPageRoutingModule } from './order-history-routing.module';\r\n\r\nimport { OrderHistoryPage } from './order-history.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OrderHistoryPageRoutingModule\r\n  ],\r\n  declarations: [OrderHistoryPage]\r\n})\r\nexport class OrderHistoryPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { DetailedOrder } from 'src/app/interfaces/DetailedOrder';\r\nimport { OrderService } from 'src/app/services/order/order.service';\r\n\r\n@Component({\r\n  selector: 'app-order-history',\r\n  templateUrl: './order-history.page.html',\r\n  styleUrls: ['./order-history.page.scss'],\r\n})\r\nexport class OrderHistoryPage implements OnInit {\r\n\r\n  id: number;\r\n  order: DetailedOrder;\r\n  loading: Promise<HTMLIonLoadingElement>;\r\n  loadError: Boolean\r\n\r\n  constructor(private route: ActivatedRoute, private orderService: OrderService, private loadingController: LoadingController) { \r\n    this.order = {orderId: 0, total: '0', createdAt:'', updatedAt: '', items: JSON}\r\n    this.loadError = false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.id = Number(this.route.snapshot.paramMap.get('id'))\r\n    this.presentLoading()\r\n    this.getOrderHistory()\r\n  }\r\n\r\n  \r\n  getOrderHistory(){\r\n    this.orderService.getOrderById(this.id).then(async (order: DetailedOrder) => {\r\n      this.order = order[0]\r\n      console.log(order)\r\n      this.loading.then(message => message.dismiss('loaded', 'ok'))\r\n    }).catch(async() => this.loading.then(message => message.dismiss('not loaded', 'api timeout')));\r\n  }\r\n\r\n\r\n  async presentLoading() {\r\n    this.loading = this.loadingController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Please wait...',\r\n      backdropDismiss:  false\r\n    });\r\n    this.loading.then(async (message) => {\r\n      message.present()\r\n      const { data, role } = await message.onDidDismiss();\r\n      if(role == undefined || role == 'api timeout'){\r\n        this.loadError = true\r\n      }\r\n    })\r\n  }\r\n\r\n}\r\n","export default \"h1 {\\n  border-top: solid 3px #010;\\n  border-bottom: 3px solid #010;\\n  margin: 5px;\\n}\\n\\nimg {\\n  padding: 5px;\\n  margin: 10px;\\n  float: left;\\n  width: 150px;\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n  height: 50%;\\n  border-radius: 10px;\\n  margin-top: 2.5em;\\n}\\n\\n.background {\\n  background-color: teal;\\n  color: white;\\n  direction: rtl;\\n}\\n\\n.derecha {\\n  direction: rtl;\\n}\\n\\n.small {\\n  font-size: small;\\n}\\n\\n.smaller {\\n  font-size: x-small;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLWhpc3RvcnkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksMEJBQUE7RUFDQSw2QkFBQTtFQUNBLFdBQUE7QUFDSjs7QUFFQTtFQUNBLFlBQUE7RUFBYyxZQUFBO0VBQWMsV0FBQTtFQUFhLFlBQUE7RUFDekMsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtBQUlBOztBQURBO0VBQ0ksc0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQUlKOztBQURBO0VBQ0EsY0FBQTtBQUlBOztBQURBO0VBQ0EsZ0JBQUE7QUFJQTs7QUFGQTtFQUNBLGtCQUFBO0FBS0EiLCJmaWxlIjoib3JkZXItaGlzdG9yeS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJoMSAge1xyXG4gICAgYm9yZGVyLXRvcDogc29saWQgM3B4ICMwMTA7XHJcbiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzAxMDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcblxyXG5pbWcgeyAgIFxyXG5wYWRkaW5nOiA1cHg7IG1hcmdpbjogMTBweDsgZmxvYXQ6IGxlZnQ7IHdpZHRoOiAxNTBweDtcclxuZGlzcGxheTogYmxvY2s7XHJcbm1hcmdpbi1sZWZ0OiBhdXRvO1xyXG5tYXJnaW4tcmlnaHQ6IGF1dG87XHJcbmhlaWdodDogNTAlO1xyXG5ib3JkZXItcmFkaXVzOiAxMHB4O1xyXG5tYXJnaW4tdG9wOiAyLjVlbTtcclxufVxyXG5cclxuLmJhY2tncm91bmQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdGVhbDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGRpcmVjdGlvbjogcnRsXHJcbiAgfVxyXG5cclxuLmRlcmVjaGF7XHJcbmRpcmVjdGlvbjogcnRsXHJcbn1cclxuXHJcbi5zbWFsbHtcclxuZm9udC1zaXplOiBzbWFsbFxyXG59XHJcbi5zbWFsbGVye1xyXG5mb250LXNpemU6IHgtc21hbGxcclxufSJdfQ== */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Order History with ID: {{order.orderId}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"order.orderId !== 0\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row >\\r\\n        <ion-row size-xs=\\\"12\\\" size-sm=\\\"6\\\" size-md=\\\"4\\\" size-lg=\\\"3\\\" *ngFor=\\\"let item of order.items\\\">\\r\\n          <img src=\\\"https://i.picsum.photos/id/870/200/300.jpg?hmac=JX9iOiKD1A168ozbMTARKt6OKYtgsGx9GaBC8tX7oBg\\\"/>\\r\\n          <ion-grid >\\r\\n            <ion-col>          \\r\\n                  <h3 routerLink=\\\"/products/{{item.productId}}\\\">\\r\\n                    {{item.name}}\\r\\n                  </h3>\\r\\n                    <p class=\\\"small\\\">Categoría: {{item.category.name}}</p>\\r\\n                    <p class=\\\"small\\\">Precio unitario: {{item.unitPrice}} €</p>\\r\\n                    <p class=\\\"small\\\">Precio total: item.totalPrice €</p>\\r\\n           </ion-col>\\r\\n          </ion-grid>\\r\\n        </ion-row>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n     \\r\\n  </div>\\r\\n        <ion-row>\\r\\n         <ion-col>  \\r\\n            <h1 class=\\\"background\\\">Importe total: {{order.total}}€</h1>         \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n\\r\\n    \\r\\n\\r\\n  \\r\\n      <ion-row class=\\\"derecha\\\" *ngFor=\\\"let item of order.items\\\">\\r\\n        <ion-col>\\r\\n          <p class=\\\"smaller\\\">Orden creada a fecha de: {{order.createdAt}}</p>\\r\\n          <p class=\\\"smaller\\\">Fecha de última modificación: {{order.updatedAt}}</p>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n       \\r\\n      \\r\\n    <div *ngIf=\\\"loadError\\\" class=\\\"error\\\">Error fetching data from api service. Check your internet connection or try again later.</div>\\r\\n</ion-content>\";"]}